name: build free
on: push

jobs:
  free-disk-space:
    runs-on: ubuntu-latest
    steps:

    - name: Free Disk Space (Ubuntu)
      uses: jlumbroso/free-disk-space@main
      with:
        # this might remove tools that are actually needed,
        # if set to "true" but frees about 6 GB
        tool-cache: false
        
        # all of these default to true, but feel free to set to
        # "false" if necessary for your workflow
        android: true
        dotnet: false
        haskell: false
        large-packages: true
        docker-images: false
        swap-storage: true

    - name: Checkout repository
      uses: actions/checkout@v4  # This step pulls your repository's code into the runner

    - name: Verify directory
      run: ls -la  # This step lists files to confirm the android directory exists

    - name: Set up Java JDK
      uses: actions/setup-java@v4.4.0
      with:
        java-version:  '17'
        distribution: 'adopt'


    - name: Build with gradle
      run: |
          cd android
          ./gradlew assembleRelease

    - name: Upload build artifact
      uses: actions/upload-artifact@v4.4.3
      with :
          name : react-app.apk
          path : android/app/build/outputs/apk/release/app-debug.apk

